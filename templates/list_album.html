{% extends 'base.html' %}
{% block title %}
    Home Page
{% endblock %}
{% load static %}
{% block body %}


    <p>List of Album</p>
    {% for image in album %}
        <div class="edit-title" id="edit-title-{{ image.id }}" style="display: none;">
            <form method="post" enctype="multipart/form-data" action="{% url 'app:update_title' image.id %}">
                {% csrf_token %}
                <label for="title" class="col-sm-2 col-form-label">Title</label>

                <div class="col-sm-10">
                    <input type="text" name="title" maxlength="200" class="form-control" value="{{ image.title }}" required="" id="id_title"/>
                </div>
                <button class="btn btn-primary" type="submit">Update</button>
            </form>
        </div>
        <div class="popup-box" id="popup-{{ image.id }}" style="display: none;">

            {% for key, value in image_collection.items %}
                {% if key == image.id %}
                    <p>pop up box</p>
                    {% for element in value %}
                        <img
                            src="{{ MEDIA_URL }}/{{ image.id }}/{{ element }}" style="height: 75px;width: 75px;" alt="">
                            <!-- <i class="glyphicon glyphicon-remove"></i> -->


                            <form action="{% url 'app:delete_image' image.id element %}">
                                <button type="submit">Delete</button>
                            </form>
                            {{ element }}
                            <a href="{{ MEDIA_URL }}/{{ image.id }}/{{ element }}" download="{{ element }}">Download this image!</a>

                        {% endfor %}
                    {% endif %}
                {% endfor %}

                <button onclick="closePopUp(`{{ image.id }}`)" class="btn btn-primary" style="height: 40px; width: 100px;">Close</button>

            </div>


            <div class="gallery-image" id="image-{{ image.id }}">
                <button onclick="editTitle(`{{ image.id }}`)" class="btn btn-primary">Update title</button>
                <form action="{% url 'app:delete_album' image.id %}">
                    <button type="submit" class="btn btn-primary">Delete</button>
                </form>


                <form action="{% url 'app:download_album' image.id %}">
                    <a
                        href="../{{ image.id }}.zip" download="{{ image.id }}.zip">
                        <!-- <a href="..../" download="{{ image.id }}.zip"> -->

                        <button type="submit" class="btn btn-primary">

                            Download Album
                        </button>
                    </a>
                </form>

                {{ image.title }}
                {% for key, value in image_collection.items %}
                    {% if key == image.id %}

                        <!-- http://localhost:8000/media/{{image.id}}/{{element}} -->
                        <img src="http://localhost:8000/{{ MEDIA_URL }}/{{ image.id }}/{{ value.0 }}" style="height: 75px;width: 75px;" alt="" onclick="popup(`{{ image.id }}`)">

                        {% endif %}
                    {% endfor %}
                </div>


            {% endfor %}

        {% endblock %}
